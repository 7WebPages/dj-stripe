{% spaceless %}
{% load django_tables2 %}
{% load i18n %}
{% load static %}
{% if table.page %}
<div class="table-container">
    {% endif %}
    {% block table %}
    <div class="row">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h3 class="panel-title">Payment history
                        <img class="in-progress-gif" src="{% static 'img/in-progress.gif' %}" /></h2>
                    </h3>
                    <div class="pull-right">
                    </span>
                </div>
            </div>
            <div class="panel-body">
                <div class="row">
                    <form action="." method="get" id="filter">
                        <div class="col-md-4">
                            <input type="text" placeholder="Search by card last 4 digits" class="form-control" id="id_invoice__customer__card_last_4" name="invoice__customer__card_last_4" type="text">
                        </div>
                        <div class="col-md-3">
                            <input type="text" class="form-control" data-bootstrap-widget="datepicker" data-date-format="yyyy-mm-dd" data-date-language="en-US" name="invoice__period_start_0" id="invoice__period_start_0" value="{{ request.GET.invoice__period_start_0 }}" placeholder="Starting after" />
                        </div>
                        <div class="col-md-3">
                            <input type="text" class="form-control" data-bootstrap-widget="datepicker" data-date-format="yyyy-mm-dd" data-date-language="en-US" name="invoice__period_start_1" id="invoice__period_start_1" value="{{ request.GET.invoice__period_start_1 }}" placeholder="Ending before" />
                        </div>
                    </form>
                    <div class="col-md-2">
                        <button type="submit" form="filter" class="btn btn-primary">
                            <i class="glyphicon glyphicon-filter"></i>Filter
                        </button>
                    </div>
                </div>
            </div>
            <table class="table table-hover">
                {% nospaceless %}
                {% block table.thead %}
                <thead>
                    <tr>
                        {% for column in table.columns %}
                        {% if column.orderable %}
                        <th><a href="{% querystring table.prefixed_order_by_field=column.order_by_alias.next %}">{{ column.header }}</a></th>
                        {% else %}
                        <th {{ column.attrs.th.as_html }}>{{ column.header }}</th>
                        {% endif %}
                        {% endfor %}
                    </tr>
                </thead>
                {% endblock table.thead %}
                {% block table.tbody %}
                <tbody>
                    {% for row in table.page.object_list|default:table.rows %} {# support pagination #}
                    {% block table.tbody.row %}
                    <tr class="{{ forloop.counter|divisibleby:2|yesno:"even,odd" }}"> {# avoid cycle for Django 1.2-1.6 compatibility #}
                        {% for column, cell in row.items %}
                        <td {{ column.attrs.td.as_html }}>{% if column.localize == None %}{{ cell }}{% else %}{% if column.localize %}{{ cell|localize }}{% else %}{{ cell|unlocalize }}{% endif %}{% endif %}</td>
                        {% endfor %}
                    </tr>
                    {% endblock table.tbody.row %}
                    {% empty %}
                    {% if table.empty_text %}
                    {% block table.tbody.empty_text %}
                    <tr><td colspan="{{ table.columns|length }}">{{ table.empty_text }}</td></tr>
                    {% endblock table.tbody.empty_text %}
                    {% endif %}
                    {% endfor %}
                </tbody>
                {% endblock table.tbody %}
                {% block table.tfoot %}
                <tfoot></tfoot>
                {% endblock table.tfoot %}
                {% endnospaceless %}
            </table>
    </div>
    {% endblock table %}

    {% if table.page %}
    {% with table.page.paginator.count as total %}
    {% with table.page.object_list|length as count %}

    {% block pagination %}
    <ul class="pagination">
        {% if table.page.has_previous %}
        <li><a href="{% querystring table.prefixed_page_field=table.page.previous_page_number %}">&laquo;</a></li>
        {% endif %}

        {% for p in table.paginator.page_range %}
        <li><a href="{% querystring table.prefixed_page_field=p %}">{{ p }}</a></li>
        {% endfor %}

        {% if table.page.has_next %}
        <li><a href="{% querystring table.prefixed_page_field=table.page.next_page_number %}">&raquo;</a></li>
        {% endif %}

    </ul>
    {% endblock pagination %}
    {% endwith %}
    {% endwith %}
</div>
{% endif %}
{% endspaceless %}


